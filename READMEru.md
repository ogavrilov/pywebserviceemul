# pywebserviceemul
Скрипт для проверки алгоритмов работающих с веб-сервисами

#### [EN](README.md) RU

## Зачем использовать

В случае, когда ваше программное обеспечение взаимодействует с веб-сервисами, влияющими на бизнес-процессы компании, возникает необходимость тестировать максимально-возможное количество сценариев взаимодействия как успешных, так и проблемных. Поставщики веб-сервисов не всегда предоставляют тестовый стенд с большой вариацией сценариев взаимодействия, поэтому для тестирования своих алгоритмов взаимодействия с веб-сервисами можно использовать этот эмулятор.

## Как использовать

Для использования необходимо подготовить файл настроек в формате JSON и указать путь к этому файлу аргументом (первым или с кодом '-o', '--optionFile') при запуске скрипта.

Например: 
````command
python pywebserviceemul.py options.json
````

## Как это работает

Скрипт начинает слушать указанный адрес и порт, принимая запросы, обрабатывая их согласно протоколу HTTP и отправляет в ответ один из заранее подготовленных ответов (сокет). При этом можно использовать SSL.

Минимальный набор операций взаимодействия с веб-сервисом можно полностью сценариями тестирования исходя из эмуляции соответствующей реакции на запросы определенного содержания, при этом эмулируя как успешные случаи, так и ошибочные ситуации.

## Как это настроить

Все настройки укладываются в один файл формата JSON. В случае, когда файл настроек не указан, либо указан в виде имени файла без полного пути, скрипт поищет файл настроек по указанному имени или имени по умолчанию (options.json) в текущем каталоге.

#### Пример файла настроек: [options.json](options.json)

В массиве ответов первым всегда должен идти блок данных об ответе на все непонятные запросы.

Остальных же вариантов запросов/ответов может быть неограниченное количество. Алгоритм позволяет отфильтровать текущий запрос по типу (протоколу), методу, ресурсу на сервере (странице), заголовкам и содержанию тела запроса. 

При этом поиск будет искать ответ с полным совпадением данных запроса, но если такого не найдет, то предложит наиболее подходящий ответ. В случае, когда ни один ответ не подходит, алгоритм использует первый ответ из массива ответов.

## Что необходимо для работы

Python 3.7.3 или выше, а также все указанные в начале скрипта библиотеки.

Также при желании можно собрать исполняемый файл. Например для win:
````command
pyinstaller pywebserviceemul.py --onefile --noconsole
````

## О чем не стоит забывать

Сам скрипт недостаточно покрыт тестами, поэтому может содержать ошибки.